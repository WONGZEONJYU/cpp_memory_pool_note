# 一、内存与指针

# 1.指针基础

## 1.1 需理解的问题

>- 指针指向的内存位置、大小、类型
>- 指针申请新的内存和指向已有的内存
>- 怎么获取变量的地址指针变量自己存储在哪里
>- 指向的内存地址是实际的地址吗?
>- 如何释放内存
>- 指针可以直接理解为内存地址
>- 32 为程序和64 位程序对指针的影响
>- 间接符号根据地址访问其值
>- & 取地址
>- 带着疑问来看 , 先写代码指针地址指针变量

## 1.2 代码实验

[[参考代码]]()

>```c++
>#include <iostream>
>
>using namespace std;
>
>int main(int argc, char* argv[])
>{
>    cout << "101 pointer\n";
>    /*p1存在栈中*/
>    /*p1指向的空间在堆中*/
>    int* p1 { new int };
>    /* *间接符号,间接访问*/
>    *p1 = 101;
>    int i {10};
>    cout << "i = " << i << '\n';
>    int* p2 { &i };
>    *p2 = 102;
>    cout << "i = " << i << '\n';
>    cout << "p1 = " << p1 << '\n';
>
>    cout << "sizeof(p1) = " << sizeof(p1) << '\n';
>    cout << "sizeof(*p1) = " << sizeof(*p1) << '\n';
>    delete p1;
>
>    cout << "after delete p1 = " << p1 << '\n';
>
>    if (p1) {
>        cout << "p1 not empty?\n";
>    }
>    p1 = nullptr; // nullptr c++11 NULL 0
>    delete p1;
>    if (!p1) {
>        cout << "p1 is empty!\n";
>    }
>    //delete p1;
>
>	_CRT_UNUSED(getchar());
>	return 0;
>}
>
>```
>
><img src="./assets/image-20230916222247470.png" alt="image-20230916222247470" />

# 2. 程序的内存地址划分

## 2.1 简化划分

><img src="./assets/image-20230918152941360.png" alt="image-20230918152941360" />
>
>保留区 c库 0地址开始
>代码区 `.text`
>全局变量区 `.data` 未初始化 `.bss `
>堆区
>栈区
>命令行参数、环境变量
>内核区 windows 2g linux 1g
>
><img src="./assets/image-20230918161840030.png" alt="image-20230918161840030" />

## 2.2 实验

[[参考代码]]()

>```c++
>#include <iostream>
>
>using namespace std;
>
>int g1, g2{ 0 }, g3{ 1 },g4{ 2 }; 
>static int sg1{ 3 };
>
>int main(int argc, char* argv[])
>{
>    static int s1{ 5 };
>    cout << "memory address! cppds.com" <<     
>            "\ncode area main() = " << main << /* 代码区 .text */
>            "\nglobal_Uninitialized &g1 = " << &g1 <<
>            "\nglobal_initialized to 0 &g2 = " << &g2 << 
>            "\nglobal_initialized to 1 &g3 = " << &g3 << 
>            "\nglobal_initialized to 2 &g4 = " << &g4 << 
>            "\nstatic global_initialized to 3 &sg1 = " << &sg1 << 
>            "\nstatic local_initialized to 5 &s1 = " << &s1 << '\n';
>
>    int* p1{ new int }, *p2{ new int };
>
>    cout << "Heap space address p1 = " << p1 << 
>            "\nHeap space address p2 = " << p2 << 
>            "\nThe stack space address of the pointer variable &p1 = " << &p1 << 
>            "\nThe stack space address of the pointer variable &p2 = " << &p2 << '\n';
>
>    int i1{ 100 };
>    int i2{ 101 };
>
>    cout << "stack space address &i1 = " << &i1 << 
>            "\nstack space address &i2 = " << &i2 << '\n';
>
>    delete p1,delete p2;
>    p1 = p2 = nullptr;
>    (void)getchar();
>	return 0;
>}
>```

### 2.2.1 windows x86

><img src="./assets/image-20230918161023858.png" alt="image-20230918161023858" />

### 2.2.2 windows x64

><img src="./assets/image-20230918161054004.png" alt="image-20230918161054004" />

### 2.3.3 linux x64

><img src="./assets/image-20230918161130994.png" alt="image-20230918161130994" />

# 3. 数组的堆栈空间初始化和 c++11 的 for 遍历

## 3.1 一维数组

>数组是具有一定顺序关系的若干相同类型变量的集合体
>
><img src="./assets/image-20230918163850507.png" alt="image-20230918163850507" />

## 3.2 实验

[[参考代码]]()

>
>
>

